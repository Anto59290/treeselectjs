var e,t,s,i,n,l=require("@swc/helpers/lib/_class_private_field_get.js"),o=require("@swc/helpers/lib/_class_private_field_init.js"),a=require("@swc/helpers/lib/_class_private_field_set.js"),c=require("@swc/helpers/lib/_class_private_method_get.js"),h=require("@swc/helpers/lib/_class_private_method_init.js");function r(e){return e&&e.__esModule?e.default:e}e=module.exports,Object.defineProperty(e,"__esModule",{value:!0,configurable:!0}),t=module.exports,s="default",i=function(){return ks},Object.defineProperty(t,s,{get:i,set:n,enumerable:!0,configurable:!0});const d={arrowUp:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg>',arrowDown:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9l6 6 6-6"/></svg>',arrowRight:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>',attention:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',clear:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',cross:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',check:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>',partialCheck:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>'},u=(e,t)=>{if(t.innerHTML="","string"==typeof e)t.innerHTML=e;else{const s=e.cloneNode(!0);t.appendChild(s)}},p=e=>{const t=e?{...e}:{};return Object.keys(d).forEach((e=>{t[e]||(t[e]=d[e])})),t};var m=new WeakMap,v=new WeakMap,w=new WeakMap,f=new WeakMap,E=new WeakSet,k=new WeakSet,g=new WeakSet,L=new WeakSet,b=new WeakSet,_=new WeakSet,y=new WeakSet,S=new WeakSet,x=new WeakSet,W=new WeakSet,C=new WeakSet,O=new WeakSet,T=new WeakSet,A=new WeakSet,H=new WeakSet,M=new WeakSet,B=new WeakSet,P=new WeakSet,q=new WeakSet,N=new WeakSet,G=new WeakSet,j=new WeakSet,D=new WeakSet,I=new WeakSet,V=new WeakSet,$=new WeakSet;function R(){r(c)(this,k,z).call(this),r(c)(this,b,F).call(this),r(c)(this,g,U).call(this)}function z(){r(l)(this,m).innerHTML="",this.showTags?r(l)(this,m).append(...r(c)(this,W,Z).call(this)):r(l)(this,m).appendChild(r(c)(this,A,ie).call(this))}function U(){const e=[];r(l)(this,w).innerHTML="",this.clearable&&e.push(r(c)(this,q,ce).call(this)),this.isAlwaysOpened||e.push(r(c)(this,G,re).call(this,this.isOpened)),e.length&&r(l)(this,w).append(...e)}function Y(){if(!this.isAlwaysOpened&&r(l)(this,f)){const e=this.isOpened?this.iconElements.arrowUp:this.iconElements.arrowDown;u(e,r(l)(this,f))}}function F(){var e;(null===(e=this.value)||void 0===e?void 0:e.length)?r(l)(this,v).removeAttribute("placeholder"):r(l)(this,v).setAttribute("placeholder",this.placeholder),this.searchable?this.srcElement.classList.remove("treeselect-input--unsearchable"):this.srcElement.classList.add("treeselect-input--unsearchable"),r(l)(this,v).value=this.searchText}function J(){this.isOpened=!this.isOpened,r(c)(this,L,Y).call(this),this.isOpened?r(c)(this,V,me).call(this):r(c)(this,$,ve).call(this)}function K(e,t,s){const i=document.createElement("div");return i.classList.add("treeselect-input"),i.setAttribute("tabindex","-1"),i.addEventListener("mousedown",(e=>r(c)(this,S,X).call(this,e))),i.append(e,t,s),i}function X(e){e.preventDefault(),this.isOpened||r(c)(this,_,J).call(this),this.focus()}function Q(){const e=document.createElement("div");return e.classList.add("treeselect-input__tags"),e}function Z(){return this.value.map((e=>{const t=document.createElement("div");t.classList.add("treeselect-input__tags-element"),t.setAttribute("tabindex","-1"),t.setAttribute("tag-id",e.id.toString()),t.setAttribute("title",e.name);const s=r(c)(this,O,te).call(this,e.name),i=r(c)(this,T,se).call(this);return t.addEventListener("mousedown",(t=>r(c)(this,C,ee).call(this,t,e.id))),t.append(s,i),t}))}function ee(e,t){e.preventDefault(),e.stopPropagation(),this.focus(),this.removeItem(t)}function te(e){const t=document.createElement("span");return t.classList.add("treeselect-input__tags-name"),t.innerHTML=e,t}function se(){const e=document.createElement("span");return e.classList.add("treeselect-input__tags-cross"),u(this.iconElements.cross,e),e}function ie(){const e=document.createElement("span");return e.classList.add("treeselect-input__tags-count"),this.value.length?(e.innerHTML=1===this.value.length?this.value[0].name:`${this.value.length} ${this.tagsCountText}`,e):(e.innerHTML="",e)}function ne(){const e=document.createElement("input");return e.classList.add("treeselect-input__edit"),e.setAttribute("id",this.id),this.disabled&&e.setAttribute("tabindex","-1"),e.addEventListener("keydown",(e=>r(c)(this,M,le).call(this,e))),e.addEventListener("input",(t=>r(c)(this,B,oe).call(this,t,e))),e}function le(e){"Backspace"!==e.key||this.searchText.length||!this.value.length||this.showTags||this.clear(),"Backspace"===e.key&&!this.searchText.length&&this.value.length&&this.removeItem(this.value[this.value.length-1].id),"Space"!==e.code||this.searchText&&this.searchable||r(c)(this,_,J).call(this)}function oe(e,t){e.stopPropagation();const s=this.searchText,i=t.value.trim();if(0!==s.length||0!==i.length){if(this.searchable){const t=e.target.value;r(c)(this,I,pe).call(this,t),this.isOpened||r(c)(this,_,J).call(this)}else t.value="";this.searchText=t.value}else t.value=""}function ae(){const e=document.createElement("div");return e.classList.add("treeselect-input__operators"),e}function ce(){const e=document.createElement("span");return e.classList.add("treeselect-input__clear"),e.setAttribute("tabindex","-1"),u(this.iconElements.clear,e),e.addEventListener("mousedown",(e=>r(c)(this,N,he).call(this,e))),e}function he(e){var t;e.preventDefault(),e.stopPropagation(),null===(t=r(l)(this,v))||void 0===t||t.focus(),(this.searchText.length||this.value.length)&&this.clear()}function re(e){r(a)(this,f,document.createElement("span")),r(l)(this,f).classList.add("treeselect-input__arrow");const t=e?this.iconElements.arrowUp:this.iconElements.arrowDown;return u(t,r(l)(this,f)),r(l)(this,f).addEventListener("mousedown",(e=>r(c)(this,j,de).call(this,e))),r(l)(this,f)}function de(e){e.stopPropagation(),e.preventDefault(),this.focus(),r(c)(this,_,J).call(this)}function ue(){this.srcElement.dispatchEvent(new CustomEvent("input",{detail:this.value}))}function pe(e){this.srcElement.dispatchEvent(new CustomEvent("search",{detail:e}))}function me(){this.srcElement.dispatchEvent(new CustomEvent("open"))}function ve(){this.srcElement.dispatchEvent(new CustomEvent("close"))}var we=class{focus(){r(l)(this,v).focus()}blur(){this.isOpened&&r(c)(this,_,J).call(this)}updateValue(e){this.value=e,r(c)(this,k,z).call(this),r(c)(this,b,F).call(this)}removeItem(e){this.value=this.value.filter((t=>t.id!==e)),r(c)(this,D,ue).call(this),r(c)(this,k,z).call(this),r(c)(this,b,F).call(this)}clear(){this.value=[],this.searchText="",r(c)(this,I,pe).call(this,""),r(c)(this,D,ue).call(this),r(c)(this,k,z).call(this),r(c)(this,b,F).call(this)}openClose(){r(c)(this,_,J).call(this)}constructor({value:e,showTags:t,tagsCountText:s,clearable:i,isAlwaysOpened:n,searchable:d,placeholder:u,disabled:p,id:z,iconElements:U}){r(h)(this,E),r(h)(this,k),r(h)(this,g),r(h)(this,L),r(h)(this,b),r(h)(this,_),r(h)(this,y),r(h)(this,S),r(h)(this,x),r(h)(this,W),r(h)(this,C),r(h)(this,O),r(h)(this,T),r(h)(this,A),r(h)(this,H),r(h)(this,M),r(h)(this,B),r(h)(this,P),r(h)(this,q),r(h)(this,N),r(h)(this,G),r(h)(this,j),r(h)(this,D),r(h)(this,I),r(h)(this,V),r(h)(this,$),r(o)(this,m,{writable:!0,value:void 0}),r(o)(this,v,{writable:!0,value:void 0}),r(o)(this,w,{writable:!0,value:void 0}),r(o)(this,f,{writable:!0,value:void 0}),this.value=e,this.showTags=t,this.tagsCountText=s,this.searchable=d,this.placeholder=u,this.clearable=i,this.isAlwaysOpened=n,this.disabled=p,this.id=z,this.iconElements=U,this.isOpened=!1,this.searchText="",r(a)(this,m,r(c)(this,x,Q).call(this)),r(a)(this,v,r(c)(this,H,ne).call(this)),r(a)(this,w,r(c)(this,P,ae).call(this)),r(a)(this,f,null),this.srcElement=r(c)(this,y,K).call(this,r(l)(this,m),r(l)(this,v),r(l)(this,w)),r(c)(this,E,R).call(this)}};const fe=(e,t,s="",i=0)=>e.reduce(((e,n)=>{var l;const o=!!(null===(l=n.children)||void 0===l?void 0:l.length),a=i>=t&&o,c=i>t;if(e.push({id:n.value,name:n.name,childOf:s,isGroup:o,checked:!1,isPartialChecked:!1,level:i,isClosed:a,hidden:c}),o){const s=fe(n.children,t,n.value,i+1);e.push(...s)}return e}),[]),Ee=({id:e,checked:t},s)=>{s.forEach((i=>{i.childOf===e&&(i.checked=null==t||t,i.isPartialChecked=!1,i.isGroup&&Ee(i,s))}))},ke=(e,t)=>{const s=t.find((t=>t.id===e)),i=t.filter((e=>e.childOf===(null==s?void 0:s.id)));if(!s)return;const n=i.every((e=>e.checked)),l=i.some((e=>e.isPartialChecked||e.checked))&&!n,o=!n&&!l;n&&(s.checked=!0,s.isPartialChecked=!1),l&&(s.checked=!1,s.isPartialChecked=!0),o&&(s.checked=!1,s.isPartialChecked=!1),s.childOf&&ke(s.childOf,t)},ge=({id:e,isGroup:t,childOf:s,checked:i},n)=>{t&&Ee({id:e,checked:i},n),s&&ke(s,n)},Le=(e,t)=>t.reduce(((s,i)=>(i.childOf===e&&(s.push(i),i.isGroup&&s.push(...Le(i.id,t))),s)),[]),be=(e,t)=>t.reduce(((s,i)=>(i.id===e&&(s.push(i),i.childOf&&s.push(...be(i.childOf,t))),s)),[]),_e=e=>{const{onlyGroupsIds:t,allItems:s}=e.reduce(((e,t)=>t.checked?(t.isGroup&&e.onlyGroupsIds.push(t.id),e.allItems.push(t),e):e),{onlyGroupsIds:[],allItems:[]});return s.filter((e=>!t.some((t=>t===e.childOf))))},ye=(e,{id:t,isClosed:s})=>{e.filter((e=>e.childOf===t)).forEach((t=>{t.hidden=null!=s&&s,t.isGroup&&!t.isClosed&&ye(e,{id:t.id,isClosed:s})}))},Se=(e,t)=>{const s=((e,t)=>e.reduce(((s,i)=>{if(i.name.toLowerCase().includes(t.toLowerCase())){if(s.push(i),i.isGroup){const t=Le(i.id,e);s.push(...t)}if(i.childOf){const t=be(i.childOf,e);s.push(...t)}}return s}),[]))(e,t);e.forEach((t=>{s.some((e=>e.id===t.id))?(t.isGroup&&(t.isClosed=!1,ye(e,t)),t.hidden=!1):t.hidden=!0}))},xe=(e,t)=>{(e=>{e.forEach((e=>{e.checked=!1,e.isPartialChecked=!1}))})(t);t.filter((t=>e.some((e=>e===t.id)))).forEach((e=>{e.checked=!0,e.isPartialChecked=!1,ge(e,t)}))},We=(e,t,s,i)=>{xe(e,t),Ce(t,s,i)},Ce=(e,t,s)=>{e.forEach((i=>{const n=t.querySelector(`[input-id="${i.id}"]`),l=qe(n);n.checked=i.checked,Oe(i,l),Te(i,l),Ae(i,l,s),He(i,l),Be(i,l,e),Me(i,n,s)})),Pe(e,t)},Oe=(e,t)=>{e.checked?t.classList.add("treeselect-list__item--checked"):t.classList.remove("treeselect-list__item--checked")},Te=(e,t)=>{e.isPartialChecked?t.classList.add("treeselect-list__item--partial-checked"):t.classList.remove("treeselect-list__item--partial-checked")},Ae=(e,t,s)=>{if(e.isGroup){const i=t.querySelector(".treeselect-list__item-icon"),n=e.isClosed?s.arrowRight:s.arrowDown;u(n,i),e.isClosed?t.classList.add("treeselect-list__item--closed"):t.classList.remove("treeselect-list__item--closed")}},He=(e,t)=>{e.hidden?t.classList.add("treeselect-list__item--hidden"):t.classList.remove("treeselect-list__item--hidden")},Me=(e,t,s)=>{const i=t.parentNode.querySelector(".treeselect-list__item-checkbox-icon");e.checked?u(s.check,i):e.isPartialChecked?u(s.partialCheck,i):i.innerHTML=""},Be=(e,t,s)=>{if(0===e.level){const i=s.some((t=>t.isGroup&&t.level===e.level)),n=!e.isGroup&&i?"20px":"5px";t.style.paddingLeft=e.isGroup?"0":n}else t.style.paddingLeft=e.isGroup?20*e.level+"px":20*e.level+20+"px";t.setAttribute("level",e.level.toString()),t.setAttribute("group",e.isGroup.toString())},Pe=(e,t)=>{const s=e.some((e=>!e.hidden)),i=t.querySelector(".treeselect-list__empty");s?i.classList.add("treeselect-list__empty--hidden"):i.classList.remove("treeselect-list__empty--hidden")},qe=e=>e.parentNode.parentNode,Ne=(e,t)=>t.find((t=>t.id.toString()===e));var Ge=new WeakMap,je=new WeakMap,De=new WeakSet,Ie=new WeakSet,Ve=new WeakSet,$e=new WeakSet,Re=new WeakSet,ze=new WeakSet,Ue=new WeakSet,Ye=new WeakSet,Fe=new WeakSet,Je=new WeakSet,Ke=new WeakSet,Xe=new WeakSet,Qe=new WeakSet,Ze=new WeakSet,et=new WeakSet,tt=new WeakSet,st=new WeakSet,it=new WeakSet,nt=new WeakSet,lt=new WeakSet,ot=new WeakSet,at=new WeakSet,ct=new WeakSet,ht=new WeakSet,rt=new WeakSet;function dt(e,t){if(!e)return;const s=e.querySelector(".treeselect-list__item-checkbox").getAttribute("input-id"),i=Ne(s,this.flattedOptions),n=e.querySelector(".treeselect-list__item-icon");"ArrowLeft"!==t||i.isClosed||n.dispatchEvent(new Event("mousedown")),"ArrowRight"===t&&i.isClosed&&n.dispatchEvent(new Event("mousedown"))}function ut(e,t){const s=Array.from(this.srcElement.querySelectorAll(".treeselect-list__item-checkbox")).filter((e=>"none"!==window.getComputedStyle(qe(e)).display));if(s.length)if(e){const e=s.findIndex((e=>qe(e).classList.contains("treeselect-list__item--focused")));qe(s[e]).classList.remove("treeselect-list__item--focused");const n="ArrowDown"===t?e+1:e-1,l="ArrowDown"===t?0:s.length-1;var i;const o=null!==(i=s[n])&&void 0!==i?i:s[l],a=!s[n],c=qe(o);c.classList.add("treeselect-list__item--focused");const h=this.srcElement.getBoundingClientRect(),r=c.getBoundingClientRect();if(a&&"ArrowDown"===t)return void this.srcElement.scroll(0,0);if(a&&"ArrowUp"===t)return void this.srcElement.scroll(0,this.srcElement.scrollHeight);if(h.y+h.height<r.y+r.height)return void this.srcElement.scroll(0,this.srcElement.scrollTop+r.height);if(h.y>r.y)return void this.srcElement.scroll(0,this.srcElement.scrollTop-r.height)}else{qe(s[0]).classList.add("treeselect-list__item--focused")}}function pt(){const e=r(c)(this,$e,mt).call(this),t=r(c)(this,Ue,ft).call(this,this.options);e.append(...t);const s=r(c)(this,Ye,Et).call(this);s&&e.append(s);const i=r(c)(this,Fe,kt).call(this);return e.append(i),e}function mt(){const e=document.createElement("div");return e.classList.add("treeselect-list"),e.addEventListener("mouseout",(e=>r(c)(this,Re,vt).call(this,e))),e.addEventListener("mousemove",(()=>r(c)(this,ze,wt).call(this))),e}function vt(e){e.stopPropagation(),r(l)(this,Ge)&&r(l)(this,je)&&r(l)(this,Ge).classList.add("treeselect-list__item--focused")}function wt(){r(a)(this,je,!0)}function ft(e){return e.reduce(((e,t)=>{var s;if(null===(s=t.children)||void 0===s?void 0:s.length){const s=r(c)(this,Je,gt).call(this,t),i=r(c)(this,Ue,ft).call(this,t.children);return s.append(...i),e.push(s),e}const i=r(c)(this,Ke,Lt).call(this,t,!1);return e.push(i),e}),[])}function Et(){if(!this.listSlotHtmlComponent)return null;const e=document.createElement("div");return e.classList.add("treeselect-list__slot"),e.appendChild(this.listSlotHtmlComponent),e}function kt(){const e=document.createElement("div");e.classList.add("treeselect-list__empty"),e.setAttribute("title",this.emptyText);const t=document.createElement("span");t.classList.add("treeselect-list__empty-icon"),u(this.iconElements.attention,t);const s=document.createElement("span");return s.classList.add("treeselect-list__empty-text"),s.innerHTML=this.emptyText,e.append(t,s),e}function gt(e){const t=document.createElement("div");t.setAttribute("group-container-id",e.value.toString()),t.classList.add("treeselect-list__group-container");const s=r(c)(this,Ke,Lt).call(this,e,!0);return t.appendChild(s),t}function Lt(e,t){const s=r(c)(this,Xe,bt).call(this,e);if(t){const e=r(c)(this,tt,xt).call(this);s.appendChild(e)}const i=r(c)(this,it,Ct).call(this,e),n=r(c)(this,nt,Ot).call(this,e);return s.append(i,n),s}function bt(e){const t=document.createElement("div");return t.setAttribute("tabindex","-1"),t.setAttribute("title",e.name),t.classList.add("treeselect-list__item"),t.addEventListener("mouseover",(()=>r(c)(this,Qe,_t).call(this,t)),!0),t.addEventListener("mouseout",(()=>r(c)(this,Ze,yt).call(this,t)),!0),t.addEventListener("mousedown",(t=>r(c)(this,et,St).call(this,t,e))),t}function _t(e){r(l)(this,je)&&r(c)(this,at,Ht).call(this,!0,e)}function yt(e){r(l)(this,je)&&(r(c)(this,at,Ht).call(this,!1,e),r(a)(this,Ge,e))}function St(e,t){e.stopPropagation();const s=e.target.querySelector(".treeselect-list__item-checkbox");s.checked=!s.checked,r(c)(this,lt,Tt).call(this,s,t)}function xt(){const e=document.createElement("span");return e.setAttribute("tabindex","-1"),e.classList.add("treeselect-list__item-icon"),u(this.iconElements.arrowDown,e),e.addEventListener("mousedown",(e=>r(c)(this,st,Wt).call(this,e))),e}function Wt(e){e.stopPropagation(),r(c)(this,ot,At).call(this,e)}function Ct(e){const t=document.createElement("div");t.classList.add("treeselect-list__item-checkbox-container");const s=document.createElement("span");s.classList.add("treeselect-list__item-checkbox-icon"),s.innerHTML="";const i=document.createElement("input");return i.setAttribute("tabindex","-1"),i.setAttribute("type","checkbox"),i.setAttribute("input-id",e.value.toString()),i.classList.add("treeselect-list__item-checkbox"),t.append(s,i),t}function Ot(e){const t=document.createElement("label");return t.innerHTML=e.name,t.classList.add("treeselect-list__item-label"),t}function Tt(e,t){const s=this.flattedOptions.find((e=>e.id===t.value));s&&(s.checked=e.checked,s.isPartialChecked=!1,ge(s,this.flattedOptions),Ce(this.flattedOptions,this.srcElement,this.iconElements),r(c)(this,rt,Pt).call(this))}function At(e){var t,s;const i=null===(t=e.target)||void 0===t||null===(s=t.parentNode)||void 0===s?void 0:s.querySelector("[input-id]");var n;const l=null!==(n=null==i?void 0:i.getAttribute("input-id"))&&void 0!==n?n:null,o=Ne(l,this.flattedOptions);o&&(o.isClosed=!o.isClosed,ye(this.flattedOptions,o),Ce(this.flattedOptions,this.srcElement,this.iconElements),r(c)(this,ht,Bt).call(this))}function Ht(e,t){const s="treeselect-list__item--focused";if(e){const e=Array.from(this.srcElement.querySelectorAll(`.${s}`));e.length&&e.forEach((e=>e.classList.remove(s))),t.classList.add(s)}else t.classList.remove(s)}function Mt(){var e;this.selectedNodes={nodes:(e=this.flattedOptions,e.filter((e=>e.checked&&!e.isGroup))),groupedNodes:_e(this.flattedOptions)}}function Bt(){this.srcElement.dispatchEvent(new CustomEvent("arrow-click"))}function Pt(){r(c)(this,ct,Mt).call(this),this.srcElement.dispatchEvent(new CustomEvent("input",{detail:this.selectedNodes}))}var qt=class{updateValue(e){We(e,this.flattedOptions,this.srcElement,this.iconElements),r(c)(this,ct,Mt).call(this)}updateSearchValue(e){if(e===this.searchText)return;const t=""===this.searchText&&""!==e;this.searchText=e,t&&(this.flattedOptionsBeforeSearch=JSON.parse(JSON.stringify(this.flattedOptions))),""===this.searchText&&(this.flattedOptions=this.flattedOptionsBeforeSearch.map((e=>{const t=this.flattedOptions.find((t=>t.id===e.id));return t.isClosed=e.isClosed,t.hidden=e.hidden,t})),this.flattedOptionsBeforeSearch=[]),this.searchText&&Se(this.flattedOptions,e),Ce(this.flattedOptions,this.srcElement,this.iconElements),this.focusFirstListElement()}callKeyAction(e){r(a)(this,je,!1);const t=this.srcElement.querySelector(".treeselect-list__item--focused");"Enter"===e&&t&&t.dispatchEvent(new Event("mousedown")),"ArrowLeft"!==e&&"ArrowRight"!==e||r(c)(this,De,dt).call(this,t,e),"ArrowDown"!==e&&"ArrowUp"!==e||r(c)(this,Ie,ut).call(this,t,e)}focusFirstListElement(){const e="treeselect-list__item--focused",t=this.srcElement.querySelector(`.${e}`),s=Array.from(this.srcElement.querySelectorAll(".treeselect-list__item-checkbox")).filter((e=>"none"!==window.getComputedStyle(qe(e)).display));if(!s.length)return;t&&t.classList.remove(e);qe(s[0]).classList.add(e)}constructor({options:e,value:t,openLevel:s,listSlotHtmlComponent:i,emptyText:n,iconElements:l}){r(h)(this,De),r(h)(this,Ie),r(h)(this,Ve),r(h)(this,$e),r(h)(this,Re),r(h)(this,ze),r(h)(this,Ue),r(h)(this,Ye),r(h)(this,Fe),r(h)(this,Je),r(h)(this,Ke),r(h)(this,Xe),r(h)(this,Qe),r(h)(this,Ze),r(h)(this,et),r(h)(this,tt),r(h)(this,st),r(h)(this,it),r(h)(this,nt),r(h)(this,lt),r(h)(this,ot),r(h)(this,at),r(h)(this,ct),r(h)(this,ht),r(h)(this,rt),r(o)(this,Ge,{writable:!0,value:null}),r(o)(this,je,{writable:!0,value:!0}),this.options=e,this.value=t,this.openLevel=null!=s?s:0,this.listSlotHtmlComponent=null!=i?i:null,this.emptyText=null!=n?n:"No results found...",this.iconElements=l,this.searchText="",this.flattedOptions=fe(this.options,this.openLevel),this.flattedOptionsBeforeSearch=this.flattedOptions,this.selectedNodes={nodes:[],groupedNodes:[]},this.srcElement=r(c)(this,Ve,pt).call(this),this.updateValue(this.value),(e=>{const{duplications:t}=e.reduce(((e,t)=>(e.allItems.some((e=>e.toString()===t.id.toString()))&&e.duplications.push(t.id),e.allItems.push(t.id),e)),{duplications:[],allItems:[]});t.length&&console.error(`Validation: You have duplicated values: ${t.join(", ")}! You should use unique values.`)})(this.flattedOptions)}};const Nt=e=>e.map((e=>e.id));var Gt=new WeakMap,jt=new WeakMap,Dt=new WeakMap,It=new WeakMap,Vt=new WeakMap,$t=new WeakMap,Rt=new WeakMap,zt=new WeakSet,Ut=new WeakSet,Yt=new WeakSet,Ft=new WeakSet,Jt=new WeakSet,Kt=new WeakSet,Xt=new WeakSet,Qt=new WeakSet,Zt=new WeakSet,es=new WeakSet,ts=new WeakSet,ss=new WeakSet,is=new WeakSet,ns=new WeakSet;function ls(){const e=this.parentHtmlContainer;e.classList.add("treeselect");const t=new qt({options:this.options,value:this.value,openLevel:this.openLevel,listSlotHtmlComponent:this.listSlotHtmlComponent,emptyText:this.emptyText,iconElements:this.iconElements}),{groupedNodes:s,nodes:i}=t.selectedNodes,n=new we({value:this.grouped?s:i,showTags:this.showTags,tagsCountText:this.tagsCountText,clearable:this.clearable,isAlwaysOpened:this.alwaysOpen,searchable:this.searchable,placeholder:this.placeholder,disabled:this.disabled,id:this.id,iconElements:this.iconElements});return this.appendToBody&&r(a)(this,Dt,new ResizeObserver((()=>this.updateListPosition()))),n.srcElement.addEventListener("input",(e=>r(c)(this,Ut,os).call(this,e,t))),n.srcElement.addEventListener("open",(()=>r(c)(this,Qt,us).call(this))),n.srcElement.addEventListener("keydown",(e=>r(c)(this,Yt,as).call(this,e,t))),n.srcElement.addEventListener("search",(e=>r(c)(this,Ft,cs).call(this,e,t))),n.srcElement.addEventListener("focus",(()=>r(c)(this,Jt,hs).call(this)),!0),this.alwaysOpen||n.srcElement.addEventListener("close",(()=>r(c)(this,Zt,ps).call(this))),t.srcElement.addEventListener("mouseup",(()=>n.focus()),!0),t.srcElement.addEventListener("input",(e=>r(c)(this,Kt,rs).call(this,e,n))),t.srcElement.addEventListener("arrow-click",(()=>r(c)(this,Xt,ds).call(this,n))),e.append(n.srcElement),{container:e,list:t,input:n}}function os(e,t){const s=Nt(e.detail);t.updateValue(s);const{nodes:i}=t.selectedNodes;this.value=Nt(i),r(c)(this,ns,Es).call(this)}function as(e,t){this.isListOpened&&t.callKeyAction(e.key)}function cs(e,t){t.updateSearchValue(e.detail),this.updateListPosition()}function hs(){r(c)(this,ts,vs).call(this,!0),r(l)(this,$t)&&r(l)(this,$t)&&r(l)(this,Rt)&&(document.addEventListener("mousedown",r(l)(this,$t),!0),document.addEventListener("focus",r(l)(this,$t),!0),window.addEventListener("blur",r(l)(this,Rt)))}function rs(e,t){const{groupedNodes:s,nodes:i}=e.detail,n=this.grouped?s:i;t.updateValue(n),this.value=Nt(i),t.focus(),r(c)(this,ns,Es).call(this)}function ds(e){e.focus(),this.updateListPosition()}function us(){if(this.isListOpened=!0,r(l)(this,It)&&r(l)(this,Vt)&&(window.addEventListener("scroll",r(l)(this,It),!0),window.addEventListener("resize",r(l)(this,Vt))),r(l)(this,Gt)&&this.srcElement){var e;if(this.appendToBody)document.body.appendChild(r(l)(this,Gt).srcElement),null===(e=r(l)(this,Dt))||void 0===e||e.observe(this.srcElement);else this.srcElement.appendChild(r(l)(this,Gt).srcElement);this.updateListPosition(),r(c)(this,ss,ws).call(this,!0),r(l)(this,Gt).focusFirstListElement()}}function ps(){if(this.isListOpened=!1,r(l)(this,It)&&r(l)(this,Vt)&&(window.removeEventListener("scroll",r(l)(this,It),!0),window.removeEventListener("resize",r(l)(this,Vt))),!r(l)(this,Gt)||!this.srcElement)return;if(this.appendToBody?document.body.contains(r(l)(this,Gt).srcElement):this.srcElement.contains(r(l)(this,Gt).srcElement)){var e;if(this.appendToBody)document.body.removeChild(r(l)(this,Gt).srcElement),null===(e=r(l)(this,Dt))||void 0===e||e.disconnect();else this.srcElement.removeChild(r(l)(this,Gt).srcElement);r(c)(this,ss,ws).call(this,!1)}}function ms(e,t){if(!r(l)(this,Gt)||!r(l)(this,jt))return;const s=t?"treeselect-list--top-to-body":"treeselect-list--top",i=t?"treeselect-list--bottom-to-body":"treeselect-list--bottom";e?(r(l)(this,Gt).srcElement.classList.add(s),r(l)(this,Gt).srcElement.classList.remove(i),r(l)(this,jt).srcElement.classList.add("treeselect-input--top"),r(l)(this,jt).srcElement.classList.remove("treeselect-input--bottom")):(r(l)(this,Gt).srcElement.classList.remove(s),r(l)(this,Gt).srcElement.classList.add(i),r(l)(this,jt).srcElement.classList.remove("treeselect-input--top"),r(l)(this,jt).srcElement.classList.add("treeselect-input--bottom"))}function vs(e){r(l)(this,jt)&&r(l)(this,Gt)&&(e?(r(l)(this,jt).srcElement.classList.add("treeselect-input--focused"),r(l)(this,Gt).srcElement.classList.add("treeselect-list--focused")):(r(l)(this,jt).srcElement.classList.remove("treeselect-input--focused"),r(l)(this,Gt).srcElement.classList.remove("treeselect-list--focused")))}function ws(e){var t,s,i,n;e?null===(t=r(l)(this,jt))||void 0===t||t.srcElement.classList.add("treeselect-input--opened"):null===(s=r(l)(this,jt))||void 0===s||s.srcElement.classList.remove("treeselect-input--opened"),this.staticList?null===(i=r(l)(this,Gt))||void 0===i||i.srcElement.classList.add("treeselect-list--static"):null===(n=r(l)(this,Gt))||void 0===n||n.srcElement.classList.remove("treeselect-list--static")}function fs(e){r(l)(this,It)&&r(l)(this,Vt)&&r(l)(this,$t)&&r(l)(this,Rt)&&(this.alwaysOpen&&!e||(window.removeEventListener("scroll",r(l)(this,It),!0),window.removeEventListener("resize",r(l)(this,Vt))),document.removeEventListener("click",r(l)(this,$t),!0),document.removeEventListener("focus",r(l)(this,$t),!0),window.removeEventListener("blur",r(l)(this,Rt)))}function Es(){var e;null===(e=this.srcElement)||void 0===e||e.dispatchEvent(new CustomEvent("input",{detail:this.value})),this.inputCallback&&this.inputCallback(this.value)}var ks=class{mount(){var e;this.destroy();const{container:t,list:s,input:i}=r(c)(this,zt,ls).call(this);this.srcElement=t,r(a)(this,Gt,s),r(a)(this,jt,i),r(a)(this,It,this.scrollWindowHandler.bind(this)),r(a)(this,Vt,this.scrollWindowHandler.bind(this)),r(a)(this,$t,this.focusWindowHandler.bind(this)),r(a)(this,Rt,this.blurWindowHandler.bind(this)),this.alwaysOpen&&(null===(e=r(l)(this,jt))||void 0===e||e.openClose()),this.disabled&&this.srcElement.classList.add("treeselect--disabled")}updateValue(e){const t=r(l)(this,Gt);if(t){var s;t.updateValue(e);const{groupedNodes:i,nodes:n}=t.selectedNodes,o=this.grouped?i:n;null===(s=r(l)(this,jt))||void 0===s||s.updateValue(o)}}destroy(){this.srcElement&&(r(c)(this,Zt,ps).call(this),this.srcElement.innerHTML="",this.srcElement=null,r(c)(this,is,fs).call(this,!0))}focus(){r(l)(this,jt)&&r(l)(this,jt).focus()}toggleOpenClose(){r(l)(this,jt)&&(r(l)(this,jt).openClose(),r(l)(this,jt).focus())}scrollWindowHandler(){this.updateListPosition()}focusWindowHandler(e){var t,s;var i;(null===(t=this.srcElement)||void 0===t?void 0:t.contains(e.target))||(null===(s=r(l)(this,Gt))||void 0===s?void 0:s.srcElement.contains(e.target))||(null===(i=r(l)(this,jt))||void 0===i||i.blur(),r(c)(this,is,fs).call(this,!1),r(c)(this,ts,vs).call(this,!1))}blurWindowHandler(){var e;null===(e=r(l)(this,jt))||void 0===e||e.blur(),r(c)(this,is,fs).call(this,!1),r(c)(this,ts,vs).call(this,!1)}updateListPosition(){var e;const t=this.srcElement,s=null===(e=r(l)(this,Gt))||void 0===e?void 0:e.srcElement;if(!t||!s)return;s.style.transform="";const{y:i,height:n}=s.getBoundingClientRect(),{x:o,y:a,height:h,width:d}=t.getBoundingClientRect(),u=window.innerHeight-a-h,p=a>u&&a>=n&&u<n;this.appendToBody&&(s.style.transform=p?`translateY(${a-i-n}px)`:`translateY(${a+h-i}px)`,s.style.width=`${d}px`,s.style.left=`${o+window.scrollX}px`);const m=p?"top":"bottom";s.getAttribute("direction")!==m&&(s.setAttribute("direction",m),r(c)(this,es,ms).call(this,p,this.appendToBody))}constructor({parentHtmlContainer:e,value:t,options:s,openLevel:i,appendToBody:n,alwaysOpen:l,showTags:a,tagsCountText:c,clearable:d,searchable:u,placeholder:m,grouped:v,listSlotHtmlComponent:w,disabled:f,emptyText:E,staticList:k,id:g,iconElements:L,inputCallback:b}){r(h)(this,zt),r(h)(this,Ut),r(h)(this,Yt),r(h)(this,Ft),r(h)(this,Jt),r(h)(this,Kt),r(h)(this,Xt),r(h)(this,Qt),r(h)(this,Zt),r(h)(this,es),r(h)(this,ts),r(h)(this,ss),r(h)(this,is),r(h)(this,ns),r(o)(this,Gt,{writable:!0,value:null}),r(o)(this,jt,{writable:!0,value:null}),r(o)(this,Dt,{writable:!0,value:null}),r(o)(this,It,{writable:!0,value:null}),r(o)(this,Vt,{writable:!0,value:null}),r(o)(this,$t,{writable:!0,value:null}),r(o)(this,Rt,{writable:!0,value:null}),(({parentHtmlContainer:e,staticList:t,appendToBody:s})=>{e||console.error("Validation: parentHtmlContainer prop is required!"),t&&s&&console.error("Validation: You should set staticList to false if you use appendToBody!")})({parentHtmlContainer:e,staticList:k,appendToBody:n}),this.parentHtmlContainer=e,this.value=null!=t?t:[],this.options=null!=s?s:[],this.openLevel=null!=i?i:0,this.appendToBody=null==n||n,this.alwaysOpen=!(!l||f),this.showTags=null==a||a,this.tagsCountText=null!=c?c:"elements selected",this.clearable=null==d||d,this.searchable=null==u||u,this.placeholder=null!=m?m:"Search...",this.grouped=null==v||v,this.listSlotHtmlComponent=null!=w?w:null,this.disabled=null!=f&&f,this.emptyText=null!=E?E:"No results found...",this.staticList=!(!k||this.appendToBody),this.id=null!=g?g:"",this.iconElements=p(L),this.inputCallback=b,this.isListOpened=!1,this.srcElement=null,this.mount()}};